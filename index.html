<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Gambling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DIN 2014', 'DIN Bold', 'DIN Next LT Pro Bold', 'DIN', Arial, sans-serif;
            font-weight: 700;
            background: linear-gradient(180deg, #2a2520 0%, #1a1612 100%);
            color: #fff;
            overflow-x: hidden;
        }

        /* Topographic background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.02) 2px, rgba(255,255,255,0.02) 4px),
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.02) 2px, rgba(255,255,255,0.02) 4px);
            opacity: 0.3;
            pointer-events: none;
        }

        /* Top Navigation */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: transparent;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .top-nav-left {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .top-nav-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-icon-btn {
            width: 40px;
            height: 40px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-icon-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
            color: #fff;
        }

        .profile-btn:hover {
            border-color: #5cb3e0;
            color: #5cb3e0;
        }

        .nav-button {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .nav-button svg {
            width: 20px;
            height: 20px;
        }

        /* Main Navigation Tabs */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 80px;
            padding: 20px 0;
            background: transparent;
            position: relative;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .main-nav-item {
            font-size: 16px;
            font-weight: 700;
            font-family: 'DIN 2014', 'DIN Bold', 'DIN Next LT Pro Bold', 'DIN', Arial, sans-serif;
            letter-spacing: 2px;
            cursor: pointer;
            padding: 10px 0px;
            transition: all 0.2s;
            text-transform: uppercase;
            position: relative;
        }

        .main-nav-item::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #5cb3e0;
            opacity: 0;
        }

        .main-nav-item.active::after {
            opacity: 1;
        }

        .main-nav-item.active {
            color: #5cb3e0;
        }

        .main-nav-item:hover:not(.active) {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Sub Navigation */
        .sub-nav {
            display: none;
            gap: 5px;
            padding: 20px 40px;
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            justify-content: flex-end;
            align-items: center;
        }

        .sub-nav.active {
            display: flex;
        }

        .sub-nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sort-wrapper {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .sort-dropdown {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 20px;
            border-radius: 4px;
            font-size: 14px;
            color: #fff;
            cursor: pointer;
            min-width: 200px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            position: relative;
            transition: all 0.2s;
        }

        .sort-dropdown:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .sort-left {
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .sort-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .sort-icon svg {
            width: 100%;
            height: 100%;
        }

        .dropdown-arrow {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .sort-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 5px;
            background: rgba(20, 18, 15, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            min-width: 200px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .sort-menu.active {
            display: block;
        }

        .sort-option {
            padding: 12px 16px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .sort-option:last-child {
            border-bottom: none;
        }

        .sort-option:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .sort-option.active {
            color: #5cb3e0;
            background: rgba(92, 179, 224, 0.1);
        }

        /* Inventory Grid */
        .inventory-container {
            padding: 30px 40px;
            max-width: 1920px;
            margin: 0 auto;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .item-card {
            aspect-ratio: 1;
            background: linear-gradient(180deg, rgba(60, 55, 50, 0.4) 0%, rgba(40, 35, 30, 0.6) 50%, rgba(20, 18, 15, 0.8) 100%);
            border: 1px solid rgba(0, 0, 0, 0.5);
            border-radius: 0;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: visible;
            margin-bottom: 30px;
        }

        .item-card:hover {
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        /* Rarity borders */
        .item-card.consumer-grade {
            border-bottom: 4.5px solid #b0c3d9;
        }

        .item-card.industrial-grade {
            border-bottom: 4.5px solid #5e98d9;
        }

        .item-card.mil-spec {
            border-bottom: 4.5px solid #4b69ff;
        }

        .item-card.restricted {
            border-bottom: 4.5px solid #8847ff;
        }

        .item-card.classified {
            border-bottom: 4.5px solid #d32ce6;
        }

        .item-card.covert {
            border-bottom: 4.5px solid #eb4b4b;
        }

        .item-card.extraordinary {
            border-bottom: 4.5px solid #e4ae39;
        }

        .item-card.case-grey {
            border-bottom: 4.5px solid #8b8b8b;
        }

        .item-image-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        .item-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .item-info {
            position: absolute;
            bottom: -30px;
            left: 0;
            right: 0;
            text-align: left;
        }

        .item-name {
            font-size: 13px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 5px;
        }

        .item-type {
            display: none;
        }

        /* Modal/Inspection View */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            animation: fadeIn 0.2s ease;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .modal-content {
            width: 90%;
            max-width: 1400px;
            height: 85vh;
            background: linear-gradient(180deg, rgba(42, 37, 32, 0.95) 0%, rgba(26, 22, 18, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            padding: 30px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .modal-weapon-rarity {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        .modal-weapon-name {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            letter-spacing: 1px;
        }

        .rarity-bar {
            width: 200px;
            height: 4.5px;
            margin: 15px auto 0;
            border-radius: 2px;
        }

        .rarity-bar.consumer-grade {
            background: #b0c3d9;
        }

        .rarity-bar.industrial-grade {
            background: #5e98d9;
        }

        .rarity-bar.mil-spec {
            background: #4b69ff;
        }

        .rarity-bar.restricted {
            background: #8847ff;
        }

        .rarity-bar.classified {
            background: #d32ce6;
        }

        .rarity-bar.covert {
            background: #eb4b4b;
        }

        .rarity-bar.extraordinary {
            background: #e4ae39;
        }

        .rarity-bar.case-grey {
            background: #8b8b8b;
        }

        .modal-body {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.03) 0%, transparent 60%);
        }

        .weapon-display {
            font-size: 200px;
            animation: float 4s ease-in-out infinite;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.8));
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(-10deg);
            }
            50% {
                transform: translateY(-15px) rotate(-8deg);
            }
        }

        .modal-footer {
            padding: 30px 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
        }

        .modal-close-btn {
            padding: 14px 40px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .modal-delete-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: transparent;
            border: none;
            color: #eb4b4b;
            cursor: pointer;
            transition: all 0.2s;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .modal-delete-btn:hover {
            transform: scale(1.1);
        }

        .modal-delete-btn:hover svg path {
            stroke: #ff5555;
        }

        /* Confirmation Dialog */
        .confirm-dialog {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(180deg, rgba(42, 37, 32, 0.98) 0%, rgba(26, 22, 18, 0.98) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 30px 40px;
            z-index: 2000;
            min-width: 400px;
            text-align: center;
        }

        .confirm-dialog.active {
            display: block;
        }

        .confirm-dialog-text {
            font-size: 18px;
            color: #fff;
            margin-bottom: 25px;
        }

        .confirm-dialog-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .confirm-yes-btn {
            padding: 12px 30px;
            background: rgba(235, 75, 75, 0.2);
            border: 1px solid rgba(235, 75, 75, 0.5);
            color: #eb4b4b;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
        }

        .confirm-yes-btn:hover {
            background: rgba(235, 75, 75, 0.3);
        }

        .confirm-no-btn {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
        }

        .confirm-no-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Tab Content Sections */
        .tab-content {
            display: none;
            min-height: calc(100vh - 200px);
        }

        .tab-content.active {
            display: block;
        }

        .version-text {
            font-size: 120px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.15);
            text-align: center;
            padding-top: 200px;
            letter-spacing: 10px;
        }

        .coming-soon {
            font-size: 32px;
            color: rgba(255, 255, 255, 0.4);
            text-align: center;
            padding-top: 200px;
            letter-spacing: 4px;
            text-transform: uppercase;
        }

        /* Store/Gambling Styles */
        .store-container {
            padding: 30px 40px;
            max-width: 1920px;
            margin: 0 auto;
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, 180px);
            gap: 12px;
            justify-content: center;
        }

        .case-card {
            width: 180px;
            height: 290px;
            background: rgba(30, 30, 30, 0.95);
            border: none;
            padding: 0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border-radius: 4px;
        }

        .case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.7);
        }

        .case-image-container {
            height: 190px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Default orange glow for cases */
        .case-card .case-image-container {
            background: radial-gradient(ellipse at center, var(--glow-color, rgba(220, 140, 60, 0.35)) 0%, rgba(30, 30, 30, 0.95) 70%);
        }

        .case-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }

        .case-info {
            background: rgba(35, 35, 35, 0.98);
            padding: 10px 12px;
            text-align: left;
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .case-name {
            font-size: 13px;
            font-weight: 700;
            color: #fff;
            font-family: 'DIN 2014', 'DIN Bold', 'DIN Next LT Pro Bold', 'DIN', Arial, sans-serif; font-weight: 700;
            line-height: 1.3;
        }

        .case-price {
            font-size: 16px;
            font-weight: 700;
            color: #5cb3e0;
            font-family: 'DIN 2014', 'DIN Bold', 'DIN Next LT Pro Bold', 'DIN', Arial, sans-serif;
            margin: 4px 0;
        }

        .case-market-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            font-family: 'DIN 2014', 'DIN Bold', 'DIN Next LT Pro Bold', 'DIN', Arial, sans-serif; font-weight: 700;
            transition: color 0.2s;
            cursor: pointer;
        }

        .case-market-btn:hover {
            color: #fff;
        }

        .info-icon {
            width: 14px;
            height: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            font-size: 8px;
            font-weight: 700;
            font-style: italic;
            font-family: Georgia, serif;
            padding-bottom: 1px;
        }

        @media (max-width: 1200px) {
            .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-nav {
                gap: 20px;
            }
            .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <div class="top-nav">
        <div class="top-nav-left">
            <button class="nav-icon-btn" id="powerBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2v10M16.24 7.76a6 6 0 1 1-8.48 0" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="nav-icon-btn" id="settingsBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 1v3m0 16v3M4.22 4.22l2.12 2.12m11.32 11.32l2.12 2.12M1 12h3m16 0h3M4.22 19.78l2.12-2.12m11.32-11.32l2.12-2.12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
        <div class="top-nav-right">
            <button class="nav-icon-btn profile-btn" id="profileBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
                    <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Navigation -->
    <div class="main-nav">
        <div class="main-nav-item active" data-nav="inventory">INVENTORY</div>
        <div class="main-nav-item" data-nav="store">STORE</div>
        <div class="main-nav-item" data-nav="news">NEWS</div>
        <div class="main-nav-item" data-nav="info">INFO</div>
    </div>

    <!-- Sub Navigation -->
    <div class="sub-nav active" id="subNav">
        <div class="sub-nav-right">
            <div class="sort-wrapper">
                <div class="sort-icon">
                    <svg width="24" height="24" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Vertical line on left -->
                        <rect x="4" y="2" width="2.5" height="16" fill="currentColor"/>
                        <!-- Top horizontal line (longest) -->
                        <rect x="7.5" y="2" width="9.5" height="2.5" fill="currentColor"/>
                        <!-- Middle horizontal line (medium) -->
                        <rect x="7.5" y="7" width="7" height="2.5" fill="currentColor"/>
                        <!-- Bottom horizontal line (shortest) -->
                        <rect x="7.5" y="12" width="4.5" height="2.5" fill="currentColor"/>
                    </svg>
                </div>
                <div class="sort-dropdown" id="sortDropdown">
                    <span id="sortLabel">Newest</span>
                    <div class="dropdown-arrow">
                        <svg width="20" height="20" viewBox="0 0 16 16" fill="none">
                            <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="sort-menu" id="sortMenu">
                        <div class="sort-option active" data-sort="newest">Newest</div>
                        <div class="sort-option" data-sort="rarity-down">Rarity (High to Low)</div>
                        <div class="sort-option" data-sort="rarity-up">Rarity (Low to High)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Content Sections -->
    <!-- Inventory Tab (Active by default) -->
    <div class="tab-content active" id="inventoryTab">
        <!-- Inventory Grid -->
        <div class="inventory-container">
            <div class="inventory-grid" id="inventoryGrid"></div>
        </div>
    </div>

    <!-- Store Tab -->
    <div class="tab-content" id="storeTab">
        <div class="store-container">
            <div class="store-grid">
                <div class="case-card" data-case-id="snakebite" style="--glow-color: rgba(220, 140, 60, 0.35);">
                    <div class="case-image-container">
                        <img src="images/snakebite.webp" alt="Snakebite Case" class="case-image">
                    </div>
                    <div class="case-info">
                        <div class="case-name">Snakebite Case</div>
                        <div class="case-price">$2.50</div>
                        <div class="case-market-btn">
                            <span>View On Market</span>
                            <div class="info-icon">i</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- News Tab -->
    <div class="tab-content" id="newsTab">
        <div class="coming-soon">Coming Soon</div>
    </div>

    <!-- Info Tab -->
    <div class="tab-content" id="infoTab">
        <div class="version-text">v1.0</div>
    </div>

    <!-- Inspection Modal -->
    <div class="modal-overlay" id="inspectModal">
        <div class="modal-content">
            <button class="modal-delete-btn" id="deleteModal" style="display: none;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14z" stroke="#eb4b4b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10 11v6M14 11v6" stroke="#eb4b4b" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <div class="modal-header">
                <div class="modal-weapon-rarity" id="modalRarity">CONSUMER GRADE</div>
                <div class="modal-weapon-name" id="modalWeaponName">Default Knife</div>
                <div class="rarity-bar consumer-grade" id="modalRarityBar"></div>
            </div>
            <div class="modal-body">
                <div class="weapon-display" id="modalWeaponEmoji">ðŸ”ª</div>
            </div>
            <div class="modal-footer">
                <button class="modal-close-btn" id="closeModal">CLOSE</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div class="confirm-dialog" id="confirmDialog">
        <div class="confirm-dialog-text">Are you sure you want to delete this item?</div>
        <div class="confirm-dialog-buttons">
            <button class="confirm-yes-btn" id="confirmYes">YES</button>
            <button class="confirm-no-btn" id="confirmNo">NO</button>
        </div>
    </div>

    <script>
        // Available cases in the store
        const availableCases = [
            { id: 'snakebite', name: 'Snakebite Case', imageName: 'snakebite.webp' }
        ];

        // Load user's purchased cases from localStorage
        let userCases = JSON.parse(localStorage.getItem('userCases')) || [];

        // Default CS2 weapon inventory
        const defaultInventory = [
            // Pistols
            { name: 'Glock-18', type: 'Pistol', rarity: 'consumer-grade', imageName: 'glock-18.webp' },
            { name: 'P2000', type: 'Pistol', rarity: 'consumer-grade', imageName: 'p2000.webp' },
            { name: 'USP-S', type: 'Pistol', rarity: 'consumer-grade', imageName: 'usp-s.webp' },
            { name: 'P250', type: 'Pistol', rarity: 'consumer-grade', imageName: 'p250.webp' },
            { name: 'Five-SeveN', type: 'Pistol', rarity: 'consumer-grade', imageName: 'five-seven.webp' },
            { name: 'Tec-9', type: 'Pistol', rarity: 'consumer-grade', imageName: 'tec-9.webp' },
            { name: 'CZ75-Auto', type: 'Pistol', rarity: 'consumer-grade', imageName: 'cz75-auto.webp' },
            { name: 'Desert Eagle', type: 'Pistol', rarity: 'consumer-grade', imageName: 'desert-eagle.webp' },
            { name: 'Dual Berettas', type: 'Pistol', rarity: 'consumer-grade', imageName: 'dual-berettas.webp' },
            { name: 'R8 Revolver', type: 'Pistol', rarity: 'consumer-grade', imageName: 'r8-revolver.webp' },
            
            // SMGs
            { name: 'MAC-10', type: 'SMG', rarity: 'consumer-grade', imageName: 'mac-10.webp' },
            { name: 'MP9', type: 'SMG', rarity: 'consumer-grade', imageName: 'mp9.webp' },
            { name: 'MP7', type: 'SMG', rarity: 'consumer-grade', imageName: 'mp7.webp' },
            { name: 'MP5-SD', type: 'SMG', rarity: 'consumer-grade', imageName: 'mp5-sd.webp' },
            { name: 'UMP-45', type: 'SMG', rarity: 'consumer-grade', imageName: 'ump-45.webp' },
            { name: 'P90', type: 'SMG', rarity: 'consumer-grade', imageName: 'p90.webp' },
            { name: 'PP-Bizon', type: 'SMG', rarity: 'consumer-grade', imageName: 'pp-bizon.webp' },
            
            // Rifles
            { name: 'FAMAS', type: 'Rifle', rarity: 'consumer-grade', imageName: 'famas.webp' },
            { name: 'Galil AR', type: 'Rifle', rarity: 'consumer-grade', imageName: 'galil-ar.webp' },
            { name: 'AK-47', type: 'Rifle', rarity: 'consumer-grade', imageName: 'ak-47.webp' },
            { name: 'M4A4', type: 'Rifle', rarity: 'consumer-grade', imageName: 'm4a4.webp' },
            { name: 'M4A1-S', type: 'Rifle', rarity: 'consumer-grade', imageName: 'm4a1-s.webp' },
            { name: 'SG 553', type: 'Rifle', rarity: 'consumer-grade', imageName: 'sg-553.webp' },
            { name: 'AUG', type: 'Rifle', rarity: 'consumer-grade', imageName: 'aug.webp' },
            
            // Snipers
            { name: 'SSG 08', type: 'Sniper Rifle', rarity: 'consumer-grade', imageName: 'ssg-08.webp' },
            { name: 'AWP', type: 'Sniper Rifle', rarity: 'consumer-grade', imageName: 'awp.webp' },
            { name: 'G3SG1', type: 'Sniper Rifle', rarity: 'consumer-grade', imageName: 'g3sg1.webp' },
            { name: 'SCAR-20', type: 'Sniper Rifle', rarity: 'consumer-grade', imageName: 'scar-20.webp' },
            
            // Heavy
            { name: 'Nova', type: 'Shotgun', rarity: 'consumer-grade', imageName: 'nova.webp' },
            { name: 'XM1014', type: 'Shotgun', rarity: 'consumer-grade', imageName: 'xm1014.webp' },
            { name: 'Sawed-Off', type: 'Shotgun', rarity: 'consumer-grade', imageName: 'sawed-off.webp' },
            { name: 'MAG-7', type: 'Shotgun', rarity: 'consumer-grade', imageName: 'mag-7.webp' },
            { name: 'M249', type: 'Machine Gun', rarity: 'consumer-grade', imageName: 'm249.webp' },
            { name: 'Negev', type: 'Machine Gun', rarity: 'consumer-grade', imageName: 'negev.webp' },
            
            // Knife and Gloves
            { name: 'Knife', type: 'Knife', rarity: 'consumer-grade', imageName: 'knifet.webp', brightness: 0.5 },
            { name: 'Knife', type: 'Knife', rarity: 'consumer-grade', imageName: 'knifect.webp', brightness: 0.5 },
            { name: 'Default T Gloves', type: 'Gloves', rarity: 'consumer-grade', imageName: 'glovest.webp', imageScale: 1.25, offsetX: 7.5, offsetY: 7.5, brightness: 0.5 },
            { name: 'Default CT Gloves', type: 'Gloves', rarity: 'consumer-grade', imageName: 'glovesct.webp', brightness: 0.5 },
        ];

        const inventoryGrid = document.getElementById('inventoryGrid');
        const sortLabel = document.getElementById('sortLabel');
        let currentSort = localStorage.getItem('sortPreference') || 'newest';
        let inventoryCards = [];

        // Rarity order for sorting (lower number = higher rarity)
        const rarityOrder = {
            'extraordinary': 0,
            'covert': 1,
            'classified': 2,
            'restricted': 3,
            'mil-spec': 4,
            'industrial-grade': 5,
            'consumer-grade': 6
        };

        // Gun type hierarchy for HIGH TO LOW sorting
        const gunTypeOrderHighToLow = {
            'Case': 0,
            'Knife': 1,
            'Gloves': 2,
            'Sniper Rifle': 3,
            'Rifle': 4,
            'Shotgun': 5,
            'Machine Gun': 6,
            'SMG': 7,
            'Pistol': 8
        };

        // Gun type hierarchy for LOW TO HIGH sorting (reversed, pistols first)
        const gunTypeOrderLowToHigh = {
            'Pistol': 0,
            'SMG': 1,
            'Machine Gun': 2,
            'Shotgun': 3,
            'Rifle': 4,
            'Sniper Rifle': 5,
            'Knife': 6,
            'Gloves': 7,
            'Case': 8
        };

        // Render inventory items
        function renderInventory() {
            inventoryGrid.innerHTML = '';
            inventoryCards = [];
            let index = 0;

            // Render default inventory
            defaultInventory.forEach((item) => {
                const card = createInventoryCard(item, index, false);
                inventoryCards.push(card);
                inventoryGrid.appendChild(card);
                index++;
            });

            // Render user's purchased cases
            userCases.forEach((caseItem) => {
                const card = createInventoryCard(caseItem, index, true);
                inventoryCards.push(card);
                inventoryGrid.appendChild(card);
                index++;
            });
        }

        function createInventoryCard(item, index, isDeletable) {
            const card = document.createElement('div');
            card.className = `item-card ${item.rarity}`;
            
            let imageStyle = '';
            const styles = [];
            
            if (item.imageScale || item.offsetX || item.offsetY) {
                const transforms = [];
                if (item.imageScale) transforms.push(`scale(${item.imageScale})`);
                if (item.offsetX || item.offsetY) {
                    const x = item.offsetX || 0;
                    const y = item.offsetY || 0;
                    transforms.push(`translate(${x}px, ${y}px)`);
                }
                styles.push(`transform: ${transforms.join(' ')}`);
            }
            
            if (item.brightness) {
                styles.push(`filter: brightness(${item.brightness})`);
            }
            
            if (styles.length > 0) {
                imageStyle = `style="${styles.join('; ')};"`;
            }

            const imagePath = item.type === 'Case' ? `images/${item.imageName}` : `images/weapons/${item.imageName}`;
            
            card.innerHTML = `
                <div class="item-image-container">
                    <img src="${imagePath}" alt="${item.name}" class="item-image" ${imageStyle}>
                </div>
                <div class="item-info">
                    <div class="item-name">${item.name}</div>
                    <div class="item-type">${item.type || ''}</div>
                </div>
            `;

            // Add click handler to open modal
            card.addEventListener('click', () => openInspectModal(item, isDeletable));

            // Store item data on card element
            card.itemData = { ...item, originalIndex: index, isDeletable };
            return card;
        }

        renderInventory();

        // Apply saved sort preference on page load
        if (currentSort !== 'newest') {
            sortInventory(currentSort);
            
            // Update the dropdown UI to match saved preference
            document.querySelectorAll('.sort-option').forEach(opt => {
                if (opt.dataset.sort === currentSort) {
                    opt.classList.add('active');
                    sortLabel.textContent = opt.textContent;
                } else {
                    opt.classList.remove('active');
                }
            });
        }

        // Sorting function
        function sortInventory(sortType) {
            currentSort = sortType;

            const sortedCards = [...inventoryCards].sort((a, b) => {
                const itemA = a.itemData;
                const itemB = b.itemData;

                if (sortType === 'newest') {
                    return itemA.originalIndex - itemB.originalIndex;
                }

                if (sortType === 'rarity-down') {
                    // HIGH TO LOW: Gun type first (Knives/Gloves â†’ Snipers â†’ Rifles â†’ Shotguns â†’ SMGs â†’ Pistols)
                    const typeOrderA = gunTypeOrderHighToLow[itemA.type] ?? 999;
                    const typeOrderB = gunTypeOrderHighToLow[itemB.type] ?? 999;
                    if (typeOrderA !== typeOrderB) {
                        return typeOrderA - typeOrderB;
                    }
                    // Within same gun type, sort by rarity (high to low)
                    const rarityA = rarityOrder[itemA.rarity];
                    const rarityB = rarityOrder[itemB.rarity];
                    if (rarityA !== rarityB) {
                        return rarityA - rarityB; // 0=extraordinary first
                    }
                    // Within same rarity and type, sort alphabetically
                    return itemA.name.localeCompare(itemB.name);
                }

                if (sortType === 'rarity-up') {
                    // LOW TO HIGH: Gun type first (Pistols â†’ SMGs â†’ Machine Guns â†’ Shotguns â†’ Rifles â†’ Snipers â†’ Knives/Gloves)
                    const typeOrderA = gunTypeOrderLowToHigh[itemA.type] ?? 999;
                    const typeOrderB = gunTypeOrderLowToHigh[itemB.type] ?? 999;
                    if (typeOrderA !== typeOrderB) {
                        return typeOrderA - typeOrderB;
                    }
                    // Within same gun type, sort alphabetically
                    return itemA.name.localeCompare(itemB.name);
                }

                return 0;
            });

            // Clear and re-append in sorted order
            inventoryGrid.innerHTML = '';
            sortedCards.forEach(card => inventoryGrid.appendChild(card));
        }

        // Sort dropdown functionality
        const sortDropdown = document.getElementById('sortDropdown');
        const sortMenu = document.getElementById('sortMenu');

        sortDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
            sortMenu.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            sortMenu.classList.remove('active');
        });

        // Sort option click handlers
        document.querySelectorAll('.sort-option').forEach(option => {
            option.addEventListener('click', (e) => {
                e.stopPropagation();
                const sortType = option.dataset.sort;

                // Update active state
                document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');

                // Update label (without "Sort: " prefix)
                sortLabel.textContent = option.textContent;

                // Sort inventory
                sortInventory(sortType);

                // Save preference to localStorage
                localStorage.setItem('sortPreference', sortType);

                // Close menu
                sortMenu.classList.remove('active');
            });
        });

        // Modal functionality
        const modal = document.getElementById('inspectModal');
        const closeBtn = document.getElementById('closeModal');

        let currentModalItem = null;

        function openInspectModal(item, isDeletable = false) {
            currentModalItem = item;

            // Update modal content
            const weaponName = item.name;
            const rarityText = (item.rarity || 'special').toUpperCase().replace('-', ' ');

            // Add stars for extraordinary and covert items
            if (item.rarity === 'extraordinary') {
                document.getElementById('modalWeaponName').textContent = `â˜… ${weaponName} â˜…`;
                document.getElementById('modalRarity').textContent = `â˜… ${rarityText}`;
            } else if (item.rarity === 'covert') {
                document.getElementById('modalWeaponName').textContent = weaponName;
                document.getElementById('modalRarity').textContent = `â˜… ${rarityText}`;
            } else {
                document.getElementById('modalWeaponName').textContent = weaponName;
                document.getElementById('modalRarity').textContent = rarityText;
            }

            // Update weapon image in modal - centered
            const modalDisplay = document.getElementById('modalWeaponEmoji');
            // Make knives and gloves 2x bigger in modal
            const modalStyles = [];
            const transforms = [];
            
            if (item.type === 'Knife' || item.type === 'Gloves') {
                transforms.push('scale(2)');
            } else if (item.imageScale) {
                transforms.push(`scale(${item.imageScale})`);
            }
            if (item.offsetX || item.offsetY) {
                const x = item.offsetX || 0;
                const y = item.offsetY || 0;
                transforms.push(`translate(${x}px, ${y}px)`);
            }
            
            if (transforms.length > 0) {
                modalStyles.push(`transform: ${transforms.join(' ')}`);
            }
            
            if (item.brightness) {
                modalStyles.push(`filter: brightness(${item.brightness})`);
            }
            
            const imagePath = item.type === 'Case' ? `images/${item.imageName}` : `images/weapons/${item.imageName}`;
            const modalStyleStr = modalStyles.length > 0 ? modalStyles.join('; ') + ';' : '';
            modalDisplay.innerHTML = `<img src="${imagePath}" alt="${item.name}" style="max-width: 70%; max-height: 70%; object-fit: contain; display: block; margin: auto; ${modalStyleStr}">`;

            // Update rarity bar color
            const rarityBar = document.getElementById('modalRarityBar');
            rarityBar.className = `rarity-bar ${item.rarity || 'extraordinary'}`;

            // Show/hide delete button based on whether item is deletable
            const deleteBtn = document.getElementById('deleteModal');
            deleteBtn.style.display = isDeletable ? 'flex' : 'none';

            // Show modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeInspectModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close button click
        closeBtn.addEventListener('click', closeInspectModal);

        // Click outside modal to close
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeInspectModal();
            }
        });

        // ESC key to close
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                closeInspectModal();
            }
        });

        // Automatic glow color extraction from case images
        function extractDominantColor(imgElement, callback) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            const img = new Image();
            img.crossOrigin = 'Anonymous';
            img.src = imgElement.src;
            
            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                
                let r = 0, g = 0, b = 0, count = 0;
                
                // Sample pixels and calculate average (skip very dark pixels)
                for (let i = 0; i < data.length; i += 4) {
                    const red = data[i];
                    const green = data[i + 1];
                    const blue = data[i + 2];
                    const alpha = data[i + 3];
                    
                    // Skip transparent and very dark pixels
                    if (alpha > 50 && (red + green + blue) > 100) {
                        r += red;
                        g += green;
                        b += blue;
                        count++;
                    }
                }
                
                if (count > 0) {
                    r = Math.floor(r / count);
                    g = Math.floor(g / count);
                    b = Math.floor(b / count);
                    callback(`rgba(${r}, ${g}, ${b}, 0.35)`);
                } else {
                    callback('rgba(220, 140, 60, 0.35)'); // Default orange
                }
            };
            
            img.onerror = function() {
                callback('rgba(220, 140, 60, 0.35)'); // Default orange on error
            };
        }

        // Apply adaptive glow to all case cards
        document.querySelectorAll('.case-card').forEach(card => {
            const img = card.querySelector('.case-image');
            if (img) {
                extractDominantColor(img, (color) => {
                    card.style.setProperty('--glow-color', color);
                });
            }
        });

        // Case buying functionality
        document.querySelectorAll('.case-card').forEach(caseCard => {
            caseCard.addEventListener('click', function() {
                const caseId = this.getAttribute('data-case-id');
                const caseData = availableCases.find(c => c.id === caseId);
                
                if (caseData) {
                    // Create a new case item for inventory
                    const newCase = {
                        id: Date.now(), // Unique ID for deletion
                        name: caseData.name,
                        type: 'Case',
                        rarity: 'case-grey',
                        imageName: caseData.imageName
                    };
                    
                    // Add to user's cases
                    userCases.push(newCase);
                    localStorage.setItem('userCases', JSON.stringify(userCases));
                    
                    // Re-render inventory
                    renderInventory();
                    
                    // Re-apply current sort
                    if (currentSort !== 'newest') {
                        sortInventory(currentSort);
                    }
                }
            });
        });

        // Delete button functionality
        const deleteBtn = document.getElementById('deleteModal');
        const confirmDialog = document.getElementById('confirmDialog');
        const confirmYes = document.getElementById('confirmYes');
        const confirmNo = document.getElementById('confirmNo');

        deleteBtn.addEventListener('click', function() {
            confirmDialog.classList.add('active');
        });

        confirmNo.addEventListener('click', function() {
            confirmDialog.classList.remove('active');
        });

        confirmYes.addEventListener('click', function() {
            if (currentModalItem && currentModalItem.id) {
                // Remove from userCases
                userCases = userCases.filter(c => c.id !== currentModalItem.id);
                localStorage.setItem('userCases', JSON.stringify(userCases));
                
                // Re-render inventory
                renderInventory();
                
                // Re-apply current sort
                if (currentSort !== 'newest') {
                    sortInventory(currentSort);
                }
                
                // Close dialogs
                confirmDialog.classList.remove('active');
                closeInspectModal();
            }
        });

        // Add click handlers for main navigation
        const mainNavItems = document.querySelectorAll('.main-nav-item');

        // Tab switching functionality
        const subNav = document.getElementById('subNav');
        
        mainNavItems.forEach(item => {
            item.addEventListener('click', function() {
                // Update active nav item
                mainNavItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                // Switch tab content
                const tabName = this.getAttribute('data-nav');
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });

                // Show the selected tab
                const targetTab = document.getElementById(tabName + 'Tab');
                if (targetTab) {
                    targetTab.classList.add('active');
                }

                // Show sub-nav only on inventory tab
                if (tabName === 'inventory') {
                    subNav.classList.add('active');
                } else {
                    subNav.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
